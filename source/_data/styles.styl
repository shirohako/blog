@import 'variables';

:root {
  --link-hover-color: $SHION;
}

// 侧边栏
aside.sidebar {
  // TOC & Overview 按钮
  .sidebar-nav {
    overflow: visible;
  }

  // TOC 内容
  .sidebar-panel-container {
    padding-top: 10px;
  }

  // 返回按钮
  .back-to-top.back-to-top-on {
    margin-top: 5px;
  }

  // TOC 内容
  .post-toc .nav {
    padding: 0 10px;

    .nav-item:not(.active) {
      display: block;
      padding: 7px;
    }

    .nav-item.active {
      padding: 7px 0;
    }

    .active > a {
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      border-bottom-color: #8f77b5;
      color: #fff;
      background: rgba(rgb($SHION), 0.8);
      padding: 5px 3px 3px 10px;
      border-radius: 5px;
    }
  }

  .posts-collapse .post-content .post-header:hover {
    border-bottom-color: $SHION;
  }

  a.nav-link {
    border-bottom: none;
  }

  // 自定义友情链接
  .friend-link {
    margin: 5px 0;
    border: none;

    button {
      font-size: 1rem;
      color: $SHION;
      text-shadow: 0 1px 1px #bcaace85;
      font-weight: 400;
      padding: 6px;
      border-radius: 6px;
      width: 100%;
      text-align: center;
      display: block;
      border: none;
      transition: all 0.3s ease-out;

      &:hover {
        background-color: rgba($SHION, 0.8);
        color: #fff;
      }

      &:hover span {
        display: none;
      }

      &:hover:before {
        content: '繁星璀璨';
      }

      &:active, &:hover, &:focus {
        outline: unset;
        border: none;
      }
    }
  }
}

// 鼠标样式
body, html {
  cursor: url('/images/cursor.png'), auto !important;
}

// 鼠标样式(链接)
a, .back-to-top-cat, .fa-copy, button {
  cursor: url('/images/cursor_link.png'), auto !important;
}

// 侧边栏站标
.site-brand-container {
  background: $SHION;
}

// 文章最大宽度
.main {
  max-width: 1380px;
}

// 文章样式
.main-inner.post {
  background: var(--content-bg-color);

  // 背景
  .post-block {
    background-image: linear-gradient(90deg, rgba(159, 219, 252, 0.15) 3%, transparent 0), linear-gradient(1turn, rgba(159, 219, 252, 0.15) 3%, transparent 0);
    background-size: 20px 20px;
    background-position: 50%;
  }

  // 选中文本样式
  ::selection {
    color: #fff;
    background-color: $SHION;
  }

  .post-body {
    code {
      background-color: #eff6fc;
      font-family: iosevka, microsoft yahei, monospace;
      padding: 0.1em 0.3em;
      margin: 0 0.2em;
      border-bottom: 2px solid #c7e0f4;
    }

    strong {
      background: linear-gradient(transparent 80%, rgba(rgb($SAKURA), 1) 80%);
      padding: 2px 4px;
    }

    // 链接
    p > a {
      background: linear-gradient(transparent 80%, rgba(rgb($SAKURA), 0.8) 80%);
      color: var(--link-color);
      text-decoration: none;
      border-bottom: none;
    }

    p > a:hover {
      background: linear-gradient(transparent 80%, rgba(rgb($SHION), 0.8) 80%);
    }

    // 代码块
    figure.highlight {
      background: $SHION;
      border-radius: 5px;

      .table-container {
        background-color: #fff;
      }

      .copy-btn i {
        color: #fff;
      }

      pre {
        font-size: 0.85em;
      }
    }

    // 引用
    blockquote {
      border: 0;
      background: #e4ebf6;
      color: #667a99;
      border-radius: 4px;
      padding: 8px 15px;
      border-top: 2px dotted #fff;
      border-bottom: 2px dotted #fff;
      margin: 0 0 20px;

      p:nth-child(1) {
        margin-bottom: 0;
      }

      a {
        background: linear-gradient(transparent 85%, #c4b8f5 77%);
      }

      a:hover {
        background: linear-gradient(transparent 85%, #957ff1 77%);
      }
    }

    // 列表
    ol, ul {
      list-style: none;
      counter-reset: li;
      margin: 15px 0;
      padding-inline-start: 25px;

      li:before {
        color: #fff;
      }

      li {
        margin-bottom: 10px;
      }
    }

    ol > li:before {
      margin: 0 0.6em 0 0;
      width: 1.5em;
      height: 1.5em;
      border-radius: 50%;
      content: counter(li);
      counter-increment: li;
      text-align: center;
      line-height: 1.6em;
      display: inline-block;
      background: $SHION;
      vertical-align: middle;
      font-size: 1em;
    }

    ul li:before {
      margin: -0.2em 0.5em 0 0.45em;
      width: 0.65em;
      height: 0.65em;
      border: 0.15em solid $SHION;
      border-radius: 1rem;
      background: #fff;
      content: '';
      line-height: 2em;
      display: inline-block;
      vertical-align: middle;
      font-size: 0.85em;
    }

    // Heading 1
    // Code via https://blog.logrocket.com/five-cool-css-header-styles-with-cross-browser-compatibility/
    h1 {
      position: relative;
      width: 80%;
      font-size: 1.5rem;
      font-weight: 600;
      color: transparent;
      -webkit-background-clip: text;
      background-clip: text;
      background-image: repeating-radial-gradient(farthest-side at 5px 5px, #553c9a, #ee4b2b, #553c9a);
    }

    // Heading 2
    // Code via https://juejin.cn/post/7167963283176521741
    h2 {
      display: block;
      border-bottom: 4px solid #4dd0e1;
      position: relative;
      font-size: 1.3rem;
      padding: 12px 32px;
      margin: 30px 0;
      color: #4dd0e1;
    }

    h2:before {
      width: 24px;
      height: 24px;
      left: 0;
      top: 0;
      margin: auto;
      background-size: 24px 24px;
      background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII='); // Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=');
    }

    h2:after {
      right: 0;
      width: 400px;
      height: 10px;
      border-top-right-radius: 24px;
      background: linear-gradient(90deg, #fff, #4dd0e1);
      max-width: 50vw;
    }

    h2:after, h2:before {
      content: '';
      display: block;
      position: absolute;
      bottom: 0;
    }

    h3 {
      font-size: 1.175rem;
    }

    h3:before {
      content: '[';
      margin-right: 5px;
      color: $TSUYUKUSA;
      font-size: 1.125em;
    }

    h3:after {
      content: ']';
      margin-left: 5px;
      color: $TSUYUKUSA;
      font-size: 1.125em;
    }

    // 表格
    table {
      td[colspan] {
        text-align: center;
      }
    }

    .center * {
      text-align: center;
    }

    .github-card {
      display: flex;
      border: 1px solid;
      padding: 5px 25px;
      border-radius: 10px;
      margin: 0 0 20px 0;

      .github-card-icon {
        display: flex;
        margin-right: 25px;
      }

      .github-card-icon i {
        font-size: 96px;
        align-self: center;
      }

      .github-card-title {
        font-weight: 600;
        color: #f05f70;
        font-size: 1.15em;
        margin: 5px 0 0 0;
      }

      .github-card-desc {
        text-align: initial;
      }

      .github-card-button {
        margin-bottom: 10px;
        color: #fff;

        button {
          color: #fff;
          cursor: pointer;
          border: none;
          border-radius: 5px;
        }

        a:nth-child(1) > button {
          background-color: $SHION;
          margin-right: 5px;
        }

        a:nth-child(2) > button {
          background-color: #e27784;
          color: #fff;
        }

        a, a:hover, a:active, a:visited {
          color: #fff;
          background: none;
          border: none;
        }

        button:focus, button:active:focus {
          color: #fff;
          outline: none;
        }
      }
    }
  }

  .post-copyright {
    font-size: 0.875em;
    border-radius: 5px;
    background-color: rgba(rgb($SHION), 0.1);
    padding: 15px 0 15px 15px;
    border-left: 5px solid $KOHBAI;

    .post-copyright-bg {
      height: 100%;
      padding-left: 165px;
      background-image: url('/images/priest.png');
      background-size: contain;
      background-repeat: no-repeat;
      display: flex;
      flex-flow: column;
      justify-content: center;
      font-size: 1rem;

      @media (min-width: 300px) {
        min-height: 165px;
      }

      span {
        word-break: keep-all;
      }

      .post-copyright-uta {
        font-size: 1.2rem;
        font-weight: 600;
      }

      .post-copyright-highlight {
        color: #8f77b5;
        font-weight: bold;
      }
    }

    .license-name {
      font-weight: bold;
    }

    p {
      margin: 5px;
    }

    p:last-child {
      margin-bottom: 0;
    }
  }

  // FELT Liner Note
  .liner-note-block {
    background-color: rgba(163, 216, 255, 0.2);
    padding: 20px 40px;
    border-radius: 15px;
    margin-bottom: 20px;
    font-size: 1rem;

    .liner-note-name {
      text-align: left;
      font-weight: bold;
      font-size: 22px;
      margin: 10px 0 20px 0;

      mark {
        font-size: 0.7rem;
        padding: 4px 6px;
        margin: 0 3px;
        border-radius: 7px;
        vertical-align: middle;
        background-color: rgba(255, 255, 255, 0.9);
        border: 2px solid;
        color: rgba(96, 96, 96, 0.982);
        user-select: none;
      }
    }

    .note-original-text {
      margin: 0;
    }

    .note-teanslated-text {
      border-top: 0.2px solid rgba(218, 213, 213, 0.776);
      margin: 15px 0 0 0;
      padding-top: 15px;
    }
  }

  .note-block-color-mzc {
    background-color: rgba(163, 186, 255, 0.25);
  }

  .note-block-color-maika {
    background-color: rgba(255, 163, 232, 0.1);
  }

  .note-block-color-mika {
    background-color: rgba(137, 238, 252, 0.15);
  }

  .note-block-color-vivi {
    background-color: rgba(252, 251, 0, 0.15);
  }

  .note-block-color-renko {
    background-color: rgba(50, 59, 14, 0.08);
  }

  .note-block-color-ao {
    background-color: rgba(215, 65, 65, 0.08);
  }

  .note-block-color-eris {
    background-color: rgba(120, 50, 153, 0.09);
  }

  .note-block-color-kurumi {
    background-color: rgba(50, 153, 59, 0.15);
  }

  // License 和 FELT Album Deatil 样式
  .liner-note-album-detail, .license-block {
    background: #f4f4f4;
    border: 2px solid #222;
    border-radius: 4px;
    display: flex;
    padding: 30px 25px 25px;
    font-size: 0.85rem;
    position: relative;
    margin: 35px 0 20px;

    .note-wrap {
      position: absolute;
      top: -17.5px;
      left: 22px;
      transform: skewX(-30deg);
      border: 2px solid #222;
      background: #fff;
      padding: 2px 20px;

      p {
        margin: 0;
        display: inline-block;
        font-size: 1rem;
        font-weight: bold;
        transform: skewX(30deg);
      }
    }

    // CD左侧图片
    .note-album-img {
      width: 96px;
      margin-right: 20px;
      background-image: url('https://i.psray.net/i/2024/04/29/662f0b7936426.png');
      background-repeat: no-repeat;
      background-size: contain;
    }

    // 创作协议左侧图片
    .license-img {
      width: 96px;
      margin-right: 40px;
      margin-top: 20px;
      background-image: url('https://i.psray.net/i/2024/04/29/662f3c1a4b337.png');
      background-repeat: no-repeat;
      background-size: contain;
    }

    // 专辑标题
    .note-album-title {
      font-size: 1.5rem;
      font-weight: 700;
    }

    // 更新时间 Icon
    .note-album-date {
      i::before {
        font: var(--fa-font-solid);
        content: '\f017';
      }

      b:first-of-type {
        background-image: linear-gradient(to right, rgba(113, 113, 226, 0.2) 0%, rgba(113, 113, 226, 0.6) 100%);
        background-size: 100% 15%;
        background-repeat: no-repeat;
        background-position: left 80%;
      }
    }

    .underline {
      background-image: linear-gradient(to right, rgba(113, 113, 226, 0.3) 0%, rgba(113, 113, 226, 0.5) 100%);
      background-size: 100% 15%;
      background-repeat: no-repeat;
      background-position: left 80%;
    }

    .attribution {
      font-size: 1.05rem;
      font-weight: 600;
      line-height: 2rem;

      i {
        width: 16px;
        text-align: center;
        vertical-align: middle;
        font-size: 0.7rem;
        margin-right: 3px;
      }
    }

    .license-name {
      border-top: 1px dashed;
      margin-top: 5px;
      padding-top: 5px;
    }

    // 专辑的外部数据库链接
    .note-album-links {
      display: flex;
      gap: 5px;
      margin-right: 3px;

      i {
        font-size: 0.7rem;
      }

      div {
        margin-right: 5px;
      }

      // THBWiki Icon
      .note-album-link-thbwiki>i::before {
        font: var(--fa-font-solid);
        content: '\f1c0';
      }

      // VGMdb Icon
      .note-album-link-vgmdb>i::before {
        font: var(--fa-font-solid);
        content: '\f02d';
      }

      // Home Page Icon
      .note-album-link-hp>i::before {
        font: var(--fa-font-solid);
        content: '\f015';
      }
    }

    // 专辑角色
    .note-album-characters {
      &::before {
        font: var(--fa-font-solid);
        content: '\f007';
      }
    }
  }

  .liner-note-block-thanks {
    text-align: right;
    font-size: 1.35rem;

    p:first-of-type {
      padding-right: 0.65rem;
      font-weight: 600;
    }
  }
}

// Chrome 滚动条
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-thumb {
  background: $SHION;
}

::-webkit-scrollbar-track {
  background-color: transparent;
}

// 容器边缘圆滑
.sidebar-inner, .header-inner, .site-brand-container, .main-inner > div.post-block, .comments {
  border-radius: 5px;
}

// 首页文章标题彩色过渡
.archive .post-header span:hover {
  color: #fff;
  background-image: -webkit-gradient(linear, left top, right top, color-stop(10%, #fb618d), color-stop(40%, #8dc00a), color-stop(70%, #d68fe9));
  background-image: linear-gradient(90deg, #fb618d 10%, #8dc00a 40%, #d68fe9 70%);
  background-size: 200% auto;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  -webkit-background-clip: text;
  -webkit-animation: textclip 3s linear infinite;
  animation: textclip 3s linear infinite;
}

@keyframes textclip {
  100% {
    background-position: 200% center;
  }
}

// 自定义回到顶部样式
.back-to-top-cat {
  position: fixed;
  right: 20px;
  top: -900px;
  width: 70px;
  height: 900px;
  transition: all 0.5s ease-in-out;
  background: url('/images/scroll.png');
  background-size: 90% 100%;
  background-repeat: no-repeat;
  z-index: 1050;

  > i, > span {
    display: none;
  }

  &.back-to-top-cat-on {
    bottom: unset;
    top: 100vh < (900px + 200px) ? calc(100vh - 900px - 100px) : 0px;

    @media (min-height: 1100px) {
      top: 0;
    }

    @media (max-width: 1100px) {
      display: none;
    }
  }
}

// 文章底部 Tag
.post-tags {
  margin: 10px 0;

  a {
    border-bottom: none;
  }
}

// 阅读进度条动画
.reading-progress-bar {
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
}

// 减少动画等待时间
.main {
  .animated {
    -webkit-animation-duration: 0.3s;
    animation-duration: 0.3s;
  }
}