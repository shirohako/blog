---
title: ä½¿ç”¨ Telegram Bot ä¸ºæ–°è¿›å…¥ç¾¤ç»„çš„æˆå‘˜æä¾›éªŒè¯ç 
date: 2020-10-19 21:55:55
categories: [Memo]
---

## è¶Šæ¥è¶Šå¤šçš„SPAM

**è¿™ç¯‡æ–‡ç« å·²ç»å¥½ä¹…æ²¡æœ‰æ›´æ–°äº† ğŸ¨ æœ‰ç©ºå¤§æ¦‚ä¼šé‡æ„ä¸€ä¸‹**

ç¾¤ç»„å¤§äº†ä¹‹åç®¡ç†èµ·æ¥ä¹Ÿå˜çš„éº»çƒ¦äº†ï¼Œå¹¿å‘Šå’Œåƒåœ¾æœºå™¨äººä¹Ÿè¶Šæ¥è¶Šå¤šã€‚æ˜¾ç„¶äººå·¥å¤„ç†æ˜¯ä¸ªè´¹åŠ›ä¹Ÿä¸æ˜æ™ºçš„é€‰æ‹©
å¯ä»¥æŠŠ`Group type`è®¾ç½®ä¸º`Private Group`ï¼Œç„¶åä½¿ç”¨ç¾¤ç»„çš„é‚€è¯·é“¾æ¥ä½œä¸ºå”¯ä¸€å…¥å£ã€‚ä½†è¿™æ ·ä¹Ÿé™åˆ¶ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚æ— æ³•è¢«æœç´¢ï¼Œå†å²èŠå¤©ä¸ä¼šè¢«å…¬å¼€
ä½¿ç”¨`Telegram bot`æ¥ä¸ºæ–°æˆå‘˜æä¾›ä¸€ä¸ªéšæœºçš„é—®é¢˜ï¼Œæ¥æ‹¦æˆªspamä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œç›®å‰å¾ˆå¤šç¾¤ç»„éƒ½é‡‡ç”¨äº†è¿™ç§ç­–ç•¥ï¼Œå¦‚æœä¸æ–¹ä¾¿æ”¹æˆç§æœ‰ç¾¤ç»„çš„è¯ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸é”™è¿‡æ»¤æ–¹æ¡ˆ


## ä½¿ç”¨ Telegram Bot

å‚è€ƒ[å®˜æ–¹](https://core.telegram.org/bots)çš„ä»‹ç»

>Bots are third-party applications that run inside Telegram. Users can interact with bots by sending them messages, commands and inline requests. You control your bots using HTTPS requests to our Bot API.

è¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªä½¿ç”¨äº†TG APIçš„ç¬¬ä¸‰æ–¹ç¨‹åºï¼Œé¦–å…ˆéœ€è¦å‘  BotFather å»åˆ›å»ºï¼Œç„¶åé€šè¿‡TGå®˜æ–¹æä¾›çš„[APIæ¥å£](https://core.telegram.org/bots/api)æ¥æ§åˆ¶å’Œäº¤äº’è¡Œä¸º
å½“ç„¶å¯¹äºå¤§å¤šæ•°ç”¨æˆ·æ¥è¯´ï¼Œæ²¡æœ‰å¿…è¦å»è‡ªå·±åˆ›å»ºä¸€ä¸ªbotå»è¿è¡Œï¼Œå› ä¸ºä¸€ä¸ª`bot`å¯ä»¥å’Œå¤šä¸ªç”¨æˆ·æˆ–ç¾¤ç»„(é¢‘é“)è¿›è¡Œäº¤æ¢ï¼Œä½ å¯ä»¥ä½¿ç”¨åˆ«äººå·²ç»åˆ›å»ºå¥½çš„å®ä¾‹ï¼ŒæŠŠå®ƒæ·»åŠ è¿›è‡ªå·±çš„ç¾¤ç»„ï¼Œå°±å¯ä»¥äº†

å½“ç„¶ç›®å‰å¼€æºçš„æœºå™¨äººå¾ˆå¤šï¼ŒåŠŸèƒ½ä¹Ÿå¾ˆå¤šã€‚æ–‡ç« å°±ä»¥æ¯”è¾ƒç®€å•çš„`Telegram-CAPTCHA-bot`æ¥è¯´æ˜

{% github Tooruchan/Telegram-CAPTCHA-Bot  %}
A bot running on Telegram which will send CAPTCHA to verify if the new member is a human.
{% endgithub %}

## å¼•å…¥åˆ«äººè¿è¡Œçš„å®ä¾‹æ¥ä½¿ç”¨

é¦–å…ˆå°†å®˜æ–¹æä¾›çš„æœºå™¨äºº[@toorucaptchabot](https://t.me/toorucaptchabot)æ‹‰å…¥ç¾¤ç»„ï¼Œç‚¹å‡»`Add Members`ï¼Œæœç´¢`@toorucaptchabot`

![](https://img1.abyss.moe/2020/10/19/4ceeb52488739.jpg)

æ‹‰è¿›æ¥åï¼Œbotä¼šè‡ªåŠ¨åœ¨ç¾¤ç»„é‡Œå‘ä¸€æ¡æ¶ˆæ¯ï¼Œæ¥ç€ä½ éœ€è¦ç»™å®ƒæƒé™æ¥ç®¡ç†

![](https://img1.abyss.moe/2020/10/19/21d1236459cc7.jpg)

ç»™ä¸ç®¡ç†æƒé™
ç‚¹å‡»`Manage Group` => `Administrators` => `Add Administrator` ç„¶åé€‰æ‹©åˆšåˆšæ·»åŠ çš„æœºå™¨äºº
é»˜è®¤çš„æƒé™å°±å·²ç»å¤Ÿäº†ï¼Œè®°å¾—ç‚¹`Save`ä¿å­˜

![](https://img1.abyss.moe/2020/10/19/f255b0d3f9934.jpg)

ç„¶åæ‹‰ä¸ªæ–°äººè¿›æ¥è¯•è¯•ï¼Œå‡ºç°éªŒè¯ç å°±å¯¹å•¦

![](https://img1.abyss.moe/2020/10/19/e5a39765e2047.jpg)


## åˆ›å»ºè‡ªå·±çš„å®ä¾‹æ¥ä½¿ç”¨

ä¸Šé¢çš„æ–¹æ¡ˆä½ ä¸éœ€è¦è¿è¡Œä»»ä½•ç¨‹åºï¼Œä¹Ÿä¸éœ€è¦ä»»ä½•æœåŠ¡å™¨
å½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±è¿è¡Œä¸€ä¸ªå®ä¾‹ï¼Œéœ€è¦å‡†å¤‡ä¸€å°æœåŠ¡å™¨ï¼Œè‡ªå·±è¿è¡Œæºç å¹¶é…ç½®BOTä¿¡æ¯

### åˆ›å»º BOT

é¦–å…ˆå‘[@BotFather](https://t.me/botfather)ç”³è¯·åˆ›å»ºä¸€ä¸ªæ–°çš„`bot`ï¼Œè¾“å…¥`/newbot`

ç„¶åä¸ºbotå–ä¸ª`æ˜µç§°`å’Œ`ç”¨æˆ·å`ï¼Œç”¨æˆ·åå¿…é¡»ä»¥`bot`ç»“å°¾

![](https://img1.abyss.moe/2020/10/19/52e650b13862e.jpg)


åˆ›å»ºåä½ ä¼šå¾—åˆ°ä¸€ä¸ªåƒè¿™æ ·çš„ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…å«äº† HTTP APIï¼Œç­‰ç­‰ç”¨åˆ°å®ƒ

![](https://img1.abyss.moe/2020/10/19/f977b744de7b9.jpg)


### ç”³è¯· APP KEY

åœ¨ `Obtaining Telegram API ID` [ç”³è¯·](https://core.telegram.org/api/obtaining_api_id) API ID ä¸ API Hash
å¡«å¥½åŸºæœ¬ä¿¡æ¯åå°±å¯ä»¥å¾—åˆ°å®ƒä»¬ï¼ŒIDæ˜¯ä¸€ä¸²æ•°å­—ï¼Œapi hashæ˜¯ä¸€ä¸²å­—ç¬¦

### éƒ¨ç½²åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Š

æ¥ç€æˆ‘ä»¬ä¸‹è½½æºç ï¼Œå¹¶è¿è¡Œ`Telegram-CAPTCHA-bot`

>ä¸‹æ–‡çš„è¿è¡Œç¯å¢ƒï¼š Ubuntu 18.04.4 LTS

- å…ˆå®‰è£…`python3-pip`ï¼Œå¦‚æœæ²¡æœ‰`python3`è¯·å…ˆå®‰è£…å®ƒï¼Œå¹¶ä¸”éœ€è¦3.6ä»¥ä¸Šç‰ˆæœ¬

```bash
apt install python3-pip
```

- é€šè¿‡pip3å®‰è£…`pyrogram`ã€`tgcrypto`

```bash
pip3 install -U https://github.com/Tooruchan/Telegram-CAPTCHA-bot/raw/master/pyrogram-asyncio.zip
pip3 install --upgrade tgcrypto configparser
```

- ä»`github`ä¸‹è½½æºç 

```bash
cd ~ && git clone https://github.com/Tooruchan/Telegram-CAPTCHA-bot 
cd Telegram-CAPTCHA-bot
```

- é…ç½®`auth.ini`
 - `token`æ˜¯ä½ åœ¨`BotFather`è·å–çš„`API Token`ï¼Œ`api_hash` å’Œ `api_id`æ˜¯åˆšåˆšè·å–ç”³è¯·çš„å†…å®¹
 - `channel`æ˜¯ Bot æ—¥å¿—è®°å½•é¢‘é“ï¼Œreadmeä¸­è¯´ä¸å¡«å†™æ— æ³•å·¥ä½œï¼Œå½“ç„¶æˆ‘è¯•äº†ä¸‹ä¸å¡«æ²¡é—®é¢˜
 - `admin`æ˜¯ç®¡ç†ç”¨æˆ·ï¼Œä¸å¡«å†™åˆ™/leaveå’Œ/reloadæŒ‡ä»¤æ— æ•ˆï¼Œè¿™é‡Œæˆ‘æ²¡ç”¨åˆ°è¿™ä¸ªåŠŸèƒ½

é…ç½®å®Œæˆåï¼Œè¿è¡Œä»£ç è¯•ä¸€ä¸‹

```bash
python3 main.py
```

æŠŠ`bot`æ‹‰å…¥ç¾¤ç»„ï¼Œå¹¶ç»™ä¸ç®¡ç†å‘˜æƒé™ï¼Œæ‹‰ä¸ªäººè¿›æ¥æµ‹è¯•ä¸‹æ˜¯å¦æ­£å¸¸å·¥ä½œ
æ²¡é—®é¢˜çš„è¯æˆ‘ä»¬ä½¿ç”¨`systemd`æ¥è¿è¡Œbotï¼Œè¿™æ ·å°±ä¸è¦å¼€ç€ç»ˆç«¯ï¼Œå¯ä»¥åœ¨åå°è¿è¡Œäº†

- ä½¿ç”¨`systemd`

é¡¹ç›®ä¸­æœ‰ä¸ª`example.service`æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ª`service`çš„å®ä¾‹ï¼Œç¨ç¨æ”¹ä¸€ä¸‹å°±èƒ½ç”¨äº†

- æ‹·è´ä¸€ä»½å¹¶ç¼–è¾‘å®ƒ

```bash
cp example.service tg-bot.service
vim tg-bot.service
```


- ç¬¬2è¡Œ`Description`æ˜¯æè¿°ï¼Œéšå†™ä¸€ç‚¹ä¸œè¥¿å°±è¡Œ
- ç¬¬8è¡Œ`WorkingDirectory`å¡«å†™æ‰€åœ¨ç›®å½•ï¼Œæ¯”å¦‚`/root/Telegram-CAPTCHA-bot`
- ç¬¬9è¡Œ`ExecStart`å¡«å†™è¿è¡Œå‘½ä»¤ï¼Œæ¯”å¦‚`/usr/bin/python3 /root/Telegram-CAPTCHA-bot/main.py`

å¥½äº†åæŠŠä»–ç§»åŠ¨åˆ°`/etc/systemd/system/`å¹¶æ¿€æ´»å®ƒ

```bash
mv tg-bot.service /etc/systemd/system/
systemctl enable tg-bot
systemctl start tg-bot
```

è¿™æ ·å°±å¥½äº†~

## å…¶ä»–ä¸€äº›æä¾›å…¥ç¾¤éªŒè¯çš„æœºå™¨äºº

å½“ç„¶`Telegram-CAPTCHA-bot`åŠŸèƒ½è¿˜æ˜¯æœ‰é™çš„ï¼Œè¿™é‡Œå†ä»‹ç»2ä¸ªåŒæ ·å¯ä»¥å®ç°çš„`bot`

### Policr Mini

{% github Hentioe/policr-mini  %}
A bot running on Telegram which will send CAPTCHA to verify if the new member is a human.
{% endgithub %}

![](https://ae01.alicdn.com/kf/Ucc06ccff250547c2a676be3ccb2babb8T.jpg)
![](https://ae01.alicdn.com/kf/Ue1aef38db7f44c02aa374dd3f439e4d5V.jpg)


### fengdoorbot

{% github /fengnz/fengdoorbot  %}
A bot running on Telegram which will send CAPTCHA to verify if the new member is a human.
{% endgithub %}

![](https://ae01.alicdn.com/kf/Ubd725428a88a4d18b665736da0db7175P.jpg)
